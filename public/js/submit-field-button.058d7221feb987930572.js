"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[798],{26660:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});r(48324),r(88052),r(60228),r(76034),r(30050),r(69373),r(59903),r(59749),r(86544),r(79288),r(84254),r(752),r(21694),r(76265);var n=r(53865),o=r(19755);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,l=void 0,l=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(l)?l:String(l)),n)}var o,l}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,e);var t,r,n,i=c(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).el=o(e),t.initSubmitField(),t}return t=u,(r=[{key:"initSubmitField",value:function(){var e=this;this.el.on("click",(function(t){var r=o("#field_type_tree"),n=o("#tree-config .tree-widget-container"),i=o("#calcfield_card_header"),l=o("#displayConditionsBuilder"),a=l.length&&l.queryBuilder("getRules"),c=o("#displayConditions"),u=o("#refers_to_instance_id"),f=u.length&&o("[data-builder-id='".concat(u.val(),"']")),s=o("#default_field_permissions_table"),p=!1,d=!1,y=!1,b=o("#show_in_edit");if(i.length&&i.is(":visible")&&!b.val()){if(!e.errored){var v=document.createElement("div");v.classList.add("form-text","form-text--error"),v.innerHTML="Please select the calculation field visibility before submitting the form",b.closest(".form-group").append(v),v.scrollIntoView(),e.errored=!0}t.preventDefault()}if((r.length&&r.is(":visible")&&n.length||!r.length&&n.length)&&(p=!0),u.length&&!u.prop("disabled")&&f.length&&(d=!0),a&&c.length&&(y=!0),p){var h=n.jstree(!0).get_json("#",{flat:!1}),m=JSON.stringify(h),g=n.data();o.ajax({async:!1,type:"POST",url:e.getURL(g),data:{data:m,csrf_token:g.csrfToken}}).done((function(){alert("Tree has been updated")}))}d&&window.UpdateFilter&&window.UpdateFilter(f,t),y&&c.val(JSON.stringify(a,null,2));var w=s.DataTable().$("input,select,textarea");w.hide();var _=o(t.currentTarget).closest("form");s.remove(),_.append(w)}))}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(n.wA)}}]);